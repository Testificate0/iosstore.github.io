<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal App Store</title>
    
    <!-- CSS Frameworks -->
    <link rel="stylesheet" href="https://www.raffael.me/iOS.css/ios.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ZMYaro/holo-web@master/css/holo-ics-light-elements.css">
    <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
    
    <style>
        /* iOS 4 inspired styling */
        body {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"><rect width="4" height="4" fill="%23000"/><rect width="2" height="2" fill="%23111"/><rect x="2" y="2" width="2" height="2" fill="%23111"/></svg>');
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: #fff;
        }
        
        /* Classic iOS 4 navigation bar */
        .ios4-navbar {
            background: linear-gradient(to bottom, #6d84a3 0%, #4a5f7a 50%, #5577a2 51%, #6d84a3 100%);
            border-bottom: 1px solid #2d3642;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 0 rgba(255,255,255,0.4) inset, 0 1px 3px rgba(0,0,0,0.6);
        }
        
        .ios4-title {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 0 -1px 0 rgba(0,0,0,0.7);
        }
        
        /* Main container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Platform filter - Windows 8 Metro style */
        .platform-filter {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .metro-filter-btn {
            background: #2672ec;
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 14px;
            font-weight: 300;
            cursor: pointer;
            text-transform: uppercase;
            transition: background-color 0.2s;
        }
        
        .metro-filter-btn:hover {
            background: #1c5fb8;
        }
        
        .metro-filter-btn.active {
            background: #00bcf2;
        }
        
        /* Apps grid */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        /* iOS 4 style app cards */
        .ios4-app-card {
            background: linear-gradient(to bottom, #ffffff 0%, #f6f6f6 47%, #ededed 100%);
            border: 1px solid #d9d9d9;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            color: #333;
        }
        
        /* Android 6 style app cards */
        .android6-app-card {
            background: #fff;
            border-radius: 2px;
            padding: 16px;
            box-shadow: 0 2px 5px 0 rgba(0,0,0,0.26);
            color: #212121;
            elevation: 2;
        }
        
        /* Windows 8 style app cards */
        .metro-app-card {
            background: #2672ec;
            color: white;
            padding: 20px;
            margin: 5px;
            position: relative;
            overflow: hidden;
        }
        
        .metro-app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .app-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        /* iOS 4 style icons */
        .ios4-icon {
            width: 57px;
            height: 57px;
            border-radius: 10px;
            margin-right: 12px;
            background: linear-gradient(to bottom, #87ceeb 0%, #4682b4 100%);
            border: 1px solid #2f4f4f;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 1px 0 rgba(255,255,255,0.4) inset, 0 1px 3px rgba(0,0,0,0.6);
        }
        
        /* Android 6 material icons */
        .android6-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 16px;
            background: #4CAF50;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.26);
        }
        
        /* Windows 8 metro icons */
        .metro-icon {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 300;
        }
        
        .app-info h3 {
            margin: 0 0 4px 0;
            font-size: 16px;
        }
        
        .app-version {
            font-size: 12px;
            opacity: 0.7;
        }
        
        /* Platform badges */
        .platform-badge {
            display: inline-block;
            padding: 3px 8px;
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .badge-ios {
            background: linear-gradient(to bottom, #87ceeb 0%, #4682b4 100%);
            color: white;
            border-radius: 6px;
            border: 1px solid #2f4f4f;
            text-shadow: 0 -1px 0 rgba(0,0,0,0.5);
        }
        
        .badge-android {
            background: #4CAF50;
            color: white;
            border-radius: 2px;
        }
        
        .badge-windows {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .app-description {
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 15px;
        }
        
        /* iOS 4 style buttons */
        .ios4-button {
            background: linear-gradient(to bottom, #ffffff 0%, #f6f6f6 47%, #ededed 100%);
            border: 1px solid #d9d9d9;
            border-radius: 10px;
            padding: 10px 15px;
            color: #333;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            text-decoration: none;
            display: block;
            text-align: center;
            box-shadow: 0 1px 0 rgba(255,255,255,0.4) inset, 0 1px 3px rgba(0,0,0,0.3);
            text-shadow: 0 1px 0 rgba(255,255,255,0.8);
        }
        
        .ios4-button:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e6e6e6 47%, #dadada 100%);
        }
        
        .ios4-button:active {
            background: linear-gradient(to bottom, #dadada 0%, #e6e6e6 47%, #f0f0f0 100%);
            box-shadow: 0 1px 3px rgba(0,0,0,0.3) inset;
        }
        
        /* Android 6 material buttons */
        .android6-button {
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 2px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            text-decoration: none;
            display: block;
            text-align: center;
            text-transform: uppercase;
            box-shadow: 0 2px 5px rgba(0,0,0,0.26);
            transition: box-shadow 0.2s;
        }
        
        .android6-button:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.26);
        }
        
        .android6-button:active {
            box-shadow: 0 6px 10px rgba(0,0,0,0.26);
        }
        
        /* Windows 8 metro buttons */
        .metro-button {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 20px;
            font-size: 12px;
            font-weight: 300;
            cursor: pointer;
            width: 100%;
            text-decoration: none;
            display: block;
            text-align: center;
            text-transform: uppercase;
            transition: background-color 0.2s;
        }
        
        .metro-button:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .metro-button:active {
            background: rgba(255,255,255,0.3);
        }
        
        /* Configuration Section - iOS 4 style */
        .config-section {
            background: linear-gradient(to bottom, #ffffff 0%, #f6f6f6 47%, #ededed 100%);
            border: 1px solid #d9d9d9;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 1px 0 rgba(255,255,255,0.4) inset, 0 1px 3px rgba(0,0,0,0.6);
            color: #333;
        }
        
        .config-section h3 {
            margin-top: 0;
            font-size: 18px;
            color: #333;
            text-shadow: 0 1px 0 rgba(255,255,255,0.8);
        }
        
        .json-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 10px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2) inset;
        }
        
        /* Loading and error states */
        .loading {
            text-align: center;
            color: white;
            font-size: 16px;
            padding: 40px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .error {
            background: linear-gradient(to bottom, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            margin: 20px 0;
            border: 1px solid #d63031;
            box-shadow: 0 1px 0 rgba(255,255,255,0.2) inset, 0 1px 3px rgba(0,0,0,0.3);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .apps-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .platform-filter {
                gap: 3px;
            }
            
            .metro-filter-btn {
                padding: 12px 18px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
  <h1>📱 Web App Store</h1>

  <div class="platform-buttons">
    <button class="platform-button" onclick="setPlatform('iOS')">iOS</button>
    <button class="platform-button" onclick="setPlatform('Android')">Android</button>
    <button class="platform-button" onclick="setPlatform('Windows')">Windows</button>
  </div>

  <select id="version-select" onchange="onVersionChange()"></select>

  <main class="app-list" id="app-list">Loading...</main>

  <script>
    const themeUrls = {
      "iOS": "https://cdn.jsdelivr.net/gh/raffael/iOS.css@master/css/ios.min.css",
      "Android": "https://cdn.jsdelivr.net/gh/ZMYaro/holo-web@master/css/holo-ics-light-elements.css",
      "Windows": "https://cdn.metroui.org.ua/v4/css/metro-all.min.css"
    };

    const versionData = {
      "iOS": [4, 5, 6, 7, 8, 9],
      "Android": [2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
      "Windows": ["8.1", "10", "11"]
    };

    // Embedded app data - this replaces the need for apps.json
    const appsData = {
      "iOS": [
        {
          "name": "Safari",
          "icon": "https://via.placeholder.com/100/007AFF/FFFFFF?text=Safari",
          "versions": ["6", "7", "8", "9"],
          "link": "https://apps.apple.com/us/app/safari/id1146562112"
        },
        {
          "name": "Messages",
          "icon": "https://via.placeholder.com/100/34C759/FFFFFF?text=Messages",
          "versions": ["4", "5", "6", "7", "8", "9"],
          "link": "https://apps.apple.com/us/app/messages/id1146560543"
        },
        {
          "name": "Photos",
          "icon": "https://via.placeholder.com/100/FF9500/FFFFFF?text=Photos",
          "versions": ["5", "6", "7", "8", "9"],
          "link": "https://apps.apple.com/us/app/photos/id1584215171"
        },
        {
          "name": "Mail",
          "icon": "https://via.placeholder.com/100/007AFF/FFFFFF?text=Mail",
          "versions": ["4", "5", "6", "7", "8", "9"],
          "link": "https://apps.apple.com/us/app/mail/id1108187098"
        },
        {
          "name": "Calendar",
          "icon": "https://via.placeholder.com/100/FF3B30/FFFFFF?text=Calendar",
          "versions": ["6", "7", "8", "9"],
          "link": "https://apps.apple.com/us/app/calendar/id1108185179"
        },
        {
          "name": "Notes",
          "icon": "https://via.placeholder.com/100/FFCC00/000000?text=Notes",
          "versions": ["7", "8", "9"],
          "link": "https://apps.apple.com/us/app/notes/id1110145109"
        }
      ],
      "Android": [
        {
          "name": "Chrome",
          "icon": "https://via.placeholder.com/100/4285F4/FFFFFF?text=Chrome",
          "versions": ["4", "5", "6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.android.chrome"
        },
        {
          "name": "Gmail",
          "icon": "https://via.placeholder.com/100/EA4335/FFFFFF?text=Gmail",
          "versions": ["2", "3", "4", "5", "6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.google.android.gm"
        },
        {
          "name": "YouTube",
          "icon": "https://via.placeholder.com/100/FF0000/FFFFFF?text=YouTube",
          "versions": ["3", "4", "5", "6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.google.android.youtube"
        },
        {
          "name": "Maps",
          "icon": "https://via.placeholder.com/100/34A853/FFFFFF?text=Maps",
          "versions": ["4", "5", "6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.google.android.apps.maps"
        },
        {
          "name": "WhatsApp",
          "icon": "https://via.placeholder.com/100/25D366/FFFFFF?text=WhatsApp",
          "versions": ["5", "6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.whatsapp"
        },
        {
          "name": "Instagram",
          "icon": "https://via.placeholder.com/100/E4405F/FFFFFF?text=Instagram",
          "versions": ["6", "7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.instagram.android"
        },
        {
          "name": "Spotify",
          "icon": "https://via.placeholder.com/100/1DB954/FFFFFF?text=Spotify",
          "versions": ["7", "8", "9", "10", "11"],
          "link": "https://play.google.com/store/apps/details?id=com.spotify.music"
        }
      ],
      "Windows": [
        {
          "name": "Microsoft Edge",
          "icon": "https://via.placeholder.com/100/0078D4/FFFFFF?text=Edge",
          "versions": ["10", "11"],
          "link": "https://www.microsoft.com/en-us/edge"
        },
        {
          "name": "Microsoft Store",
          "icon": "https://via.placeholder.com/100/0078D4/FFFFFF?text=Store",
          "versions": ["8.1", "10", "11"],
          "link": "ms-windows-store://home"
        },
        {
          "name": "Calculator",
          "icon": "https://via.placeholder.com/100/5C2D91/FFFFFF?text=Calc",
          "versions": ["8.1", "10", "11"],
          "link": "ms-calculator://"
        },
        {
          "name": "Mail",
          "icon": "https://via.placeholder.com/100/0078D4/FFFFFF?text=Mail",
          "versions": ["8.1", "10", "11"],
          "link": "ms-outlook://compose"
        },
        {
          "name": "Calendar",
          "icon": "https://via.placeholder.com/100/107C10/FFFFFF?text=Calendar",
          "versions": ["8.1", "10", "11"],
          "link": "ms-calendar://"
        },
        {
          "name": "Photos",
          "icon": "https://via.placeholder.com/100/FF8C00/FFFFFF?text=Photos",
          "versions": ["10", "11"],
          "link": "ms-photos://"
        },
        {
          "name": "Notepad",
          "icon": "https://via.placeholder.com/100/5C2D91/FFFFFF?text=Notepad",
          "versions": ["8.1", "10", "11"],
          "link": "ms-settings:appsfeatures"
        }
      ]
    };

    let currentPlatform = "iOS";
    let currentVersion = "9";

    function setPlatform(platform) {
      currentPlatform = platform;
      currentVersion = versionData[platform][versionData[platform].length - 1];

      document.getElementById("theme-style").href = themeUrls[platform];

      document.querySelectorAll(".platform-button").forEach(btn => {
        btn.classList.toggle("active", btn.textContent === platform);
      });

      const versionSelect = document.getElementById("version-select");
      versionSelect.innerHTML = "";
      versionData[platform].forEach(v => {
        const option = document.createElement("option");
        option.value = v;
        option.textContent = `v${v}`;
        if (v.toString() === currentVersion.toString()) option.selected = true;
        versionSelect.appendChild(option);
      });

      loadApps();
    }

    function onVersionChange() {
      currentVersion = document.getElementById("version-select").value;
      loadApps();
    }

    async function loadApps() {
      const appList = document.getElementById("app-list");
      appList.innerHTML = "Loading apps...";

      try {
        // Try to load from external JSON first, fall back to embedded data
        let data;
        try {
          const response = await fetch("apps.json");
          if (response.ok) {
            data = await response.json();
          } else {
            throw new Error("Failed to fetch apps.json");
          }
        } catch (fetchError) {
          console.log("Using embedded app data (apps.json not found)");
          data = appsData;
        }

        const apps = (data[currentPlatform] || []).filter(app =>
          app.versions.includes(currentVersion.toString())
        );

        if (apps.length === 0) {
          appList.innerHTML = `<p>No apps found for ${currentPlatform} version ${currentVersion}.</p>`;
          return;
        }

        appList.innerHTML = "";
        apps.forEach(app => {
          const card = document.createElement("div");
          card.className = "app-card";

          const img = document.createElement("img");
          img.src = app.icon || "https://via.placeholder.com/100?text=App";
          img.alt = app.name;

          const name = document.createElement("p");
          name.textContent = app.name;

          const button = document.createElement("button");
          button.textContent = "Install";
          button.onclick = () => {
            window.open(app.link, '_blank');
          };

          card.appendChild(img);
          card.appendChild(name);
          card.appendChild(button);
          appList.appendChild(card);
        });
      } catch (err) {
        appList.innerHTML = `<p class="error-message">Error loading apps: ${err.message}</p>`;
        console.error("Error loading apps:", err);
      }
    }

    setPlatform("iOS");
  </script>
</body>
</html>
