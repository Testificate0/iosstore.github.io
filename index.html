<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App Store</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    .platform-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .platform {
      position: relative;
    }
    .dropdown {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: #222;
      border: 1px solid #444;
      border-radius: 5px;
      padding: 10px;
      z-index: 1;
    }
    .dropdown button {
      display: block;
      margin: 5px 0;
      background: #333;
      border: none;
      color: white;
      padding: 8px;
      cursor: pointer;
      width: 100%;
    }
    .dropdown button:hover {
      background: #555;
    }
    .app-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }
    .app-card {
      background: #222;
      border: 1px solid #444;
      border-radius: 10px;
      padding: 10px;
      width: 160px;
      text-align: center;
    }
    .app-card img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    .app-card button {
      background: #06c;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
    .app-card button:hover {
      background: #0055aa;
    }
  </style>
</head>
<body>
  <h1>ðŸ“± Web App Store</h1>

  <div class="platform-buttons">
    <div class="platform">
      <button onclick="toggleDropdown('iOS')">iOS</button>
      <div class="dropdown" id="dropdown-iOS"></div>
    </div>
    <div class="platform">
      <button onclick="toggleDropdown('Android')">Android</button>
      <div class="dropdown" id="dropdown-Android"></div>
    </div>
    <div class="platform">
      <button onclick="toggleDropdown('Windows')">Windows</button>
      <div class="dropdown" id="dropdown-Windows"></div>
    </div>
  </div>

  <div class="app-list" id="app-list"></div>

  <script>
    const versionData = {
      "iOS": [4, 5, 6, 7, 8, 9],
      "Android": [2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
      "Windows": ["8.1", "10", "11"]
    };

    // Populate dropdowns
    for (const platform in versionData) {
      const dropdown = document.getElementById(`dropdown-${platform}`);
      versionData[platform].forEach(version => {
        const btn = document.createElement("button");
        btn.textContent = `Version ${version}`;
        btn.onclick = () => loadApps(platform, version);
        dropdown.appendChild(btn);
      });
    }

    function toggleDropdown(platform) {
      document.querySelectorAll('.dropdown').forEach(d => d.style.display = 'none');
      const dd = document.getElementById(`dropdown-${platform}`);
      dd.style.display = dd.style.display === 'block' ? 'none' : 'block';
    }

    async function loadApps(platform, version) {
      const appList = document.getElementById('app-list');
      appList.innerHTML = 'Loading...';
      try {
        const response = await fetch('apps.json');
        const data = await response.json();
        const apps = data[platform]?.[version] || [];

        if (!apps.length) {
          appList.innerHTML = '<p>No apps found for this version.</p>';
          return;
        }

        appList.innerHTML = '';
        apps.forEach(app => {
          const card = document.createElement('div');
          card.className = 'app-card';

          const img = document.createElement('img');
          img.src = app.icon || '';
          img.alt = app.name;

          const name = document.createElement('p');
          name.textContent = app.name;

          const btn = document.createElement('button');
          btn.textContent = 'Install';
          btn.onclick = () => window.location.href = app.link;

          card.appendChild(img);
          card.appendChild(name);
          card.appendChild(btn);
          appList.appendChild(card);
        });
      } catch (err) {
        appList.innerHTML = '<p>Error loading apps.</p>';
        console.error(err);
      }
    }
  </script>
</body>
</html>
